<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Canvas Drawing Demo - Reference</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
                background-color: #1e1e1e;
                padding: 40px;
                color: #ffffff;
            }

            h1 {
                font-size: 24px;
                font-weight: bold;
                margin-bottom: 8px;
            }

            .subtitle {
                color: #888888;
                font-size: 14px;
                margin-bottom: 20px;
            }

            .canvas-container {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            .canvas-wrapper {
                display: flex;
                flex-wrap: wrap;
                gap: 20px;
            }

            canvas {
                border-radius: 8px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            }

            .info {
                margin-top: 20px;
                padding: 15px;
                background-color: #2d2d2d;
                border-radius: 8px;
                font-size: 12px;
                color: #4ecdc4;
            }

            .controls {
                margin-top: 10px;
                font-size: 12px;
            }
        </style>
    </head>
    <body>
        <h1>Canvas Custom Drawing Demo (HTML Reference)</h1>
        <p class="subtitle">
            This page demonstrates the same drawing operations as the gpui-react canvas demo
        </p>

        <div class="canvas-container">
            <!-- Main canvas with all drawings -->
            <div>
                <h3 style="margin-bottom: 10px">Main Canvas (400x220)</h3>
                <canvas
                    id="mainCanvas"
                    width="400"
                    height="220"
                    style="background-color: #ffffff"
                ></canvas>
            </div>

            <div class="canvas-wrapper">
                <!-- Left canvas - light theme -->
                <div>
                    <h3 style="margin-bottom: 10px">Light Theme (200x150)</h3>
                    <canvas
                        id="lightCanvas"
                        width="200"
                        height="150"
                        style="background-color: #fafafa"
                    ></canvas>
                </div>

                <!-- Right canvas - dark theme -->
                <div>
                    <h3 style="margin-bottom: 10px">Dark Theme (200x150)</h3>
                    <canvas
                        id="darkCanvas"
                        width="200"
                        height="150"
                        style="background-color: #1a1a2e"
                    ></canvas>
                </div>
            </div>
        </div>

        <div class="info">
            <p><strong>Drawing Operations:</strong></p>
            <p>• Background grid (vertical and horizontal lines)</p>
            <p>• Animated circle (moving in a figure-8 pattern with color cycling)</p>
            <p>• Static rectangles (red, cyan colors)</p>
            <p>• Static circle (blue color)</p>
            <p>• Text rendering</p>
            <div class="controls">
                <p>
                    Time: <span id="timeDisplay">0</span> | Color:
                    <span id="colorDisplay">#ff6b6b</span>
                </p>
            </div>
        </div>

        <script>
            // Configuration
            const COLORS = ["#ff6b6b", "#4ecdc4", "#45b7d1", "#96ceb4", "#ffeaa7"];

            // State
            let time = 0;
            let colorIndex = 0;

            // Main canvas
            const mainCanvas = document.getElementById("mainCanvas");
            const mainCtx = mainCanvas.getContext("2d");

            // Light canvas
            const lightCanvas = document.getElementById("lightCanvas");
            const lightCtx = lightCanvas.getContext("2d");

            // Dark canvas
            const darkCanvas = document.getElementById("darkCanvas");
            const darkCtx = darkCanvas.getContext("2d");

            // Helper function to draw a rectangle
            function drawRect(ctx, x, y, width, height, color) {
                ctx.fillStyle = color;
                ctx.fillRect(x, y, width, height);
            }

            // Helper function to draw a circle (ellipse)
            function drawCircle(ctx, x, y, width, height, color) {
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.ellipse(
                    x + width / 2,
                    y + height / 2,
                    width / 2,
                    height / 2,
                    0,
                    0,
                    Math.PI * 2
                );
                ctx.fill();
            }

            // Helper function to draw a line
            function drawLine(ctx, x, y, width, height, color) {
                ctx.fillStyle = color;
                ctx.fillRect(x, y, Math.max(width, 1), Math.max(height, 1));
            }

            // Helper function to draw text
            function drawText(ctx, text, x, y, fontSize, color) {
                ctx.fillStyle = color;
                ctx.font = `${fontSize}px -apple-system, BlinkMacSystemFont, sans-serif`;
                ctx.fillText(text, x, y + fontSize);
            }

            // Draw background grid
            function drawGrid(ctx, width, height) {
                const gridColor = "#e0e0e0";

                // Vertical lines
                for (let i = 0; i < 10; i++) {
                    drawLine(ctx, i * 40, 0, 1, height, gridColor);
                }

                // Horizontal lines
                for (let i = 0; i < 6; i++) {
                    drawLine(ctx, 0, i * 40, width, 1, gridColor);
                }
            }

            // Draw animated circle position
            function getAnimatedCirclePos(t) {
                return {
                    x: 150 + Math.sin(t * 0.1) * 50,
                    y: 100 + Math.cos(t * 0.1) * 30,
                };
            }

            // Render main canvas
            function renderMainCanvas() {
                // Clear with background color
                mainCtx.fillStyle = "#ffffff";
                mainCtx.fillRect(0, 0, mainCanvas.width, mainCanvas.height);

                // Draw grid
                drawGrid(mainCtx, mainCanvas.width, mainCanvas.height);

                // Draw animated circle
                const animPos = getAnimatedCirclePos(time);
                drawCircle(mainCtx, animPos.x, animPos.y, 40, 40, COLORS[colorIndex]);

                // Draw static rectangle 1
                drawRect(mainCtx, 30, 30, 80, 60, "#ff6b6b");

                // Draw static rectangle 2
                drawRect(mainCtx, 250, 50, 60, 60, "#4ecdc4");

                // Draw static circle
                drawCircle(mainCtx, 290, 160, 50, 50, "#45b7d1");

                // Draw text
                drawText(mainCtx, "Canvas Drawing Demo", 30, 180, 16, "#333333");
            }

            // Render light canvas
            function renderLightCanvas() {
                lightCtx.fillStyle = "#fafafa";
                lightCtx.fillRect(0, 0, lightCanvas.width, lightCanvas.height);

                drawRect(lightCtx, 20, 20, 100, 60, "#ff6b6b");
                drawCircle(lightCtx, 140, 80, 40, 40, "#4ecdc4");
            }

            // Render dark canvas
            function renderDarkCanvas() {
                darkCtx.fillStyle = "#1a1a2e";
                darkCtx.fillRect(0, 0, darkCanvas.width, darkCanvas.height);

                drawRect(darkCtx, 30, 30, 60, 40, "#ff6b6b");
                drawCircle(darkCtx, 120, 60, 50, 50, "#4ecdc4");
            }

            // Update loop
            function update() {
                time++;
                colorIndex = (colorIndex + 1) % COLORS.length;

                // Update display
                document.getElementById("timeDisplay").textContent = time;
                document.getElementById("colorDisplay").textContent = COLORS[colorIndex];

                // Render all canvases
                renderMainCanvas();
                renderLightCanvas();
                renderDarkCanvas();

                requestAnimationFrame(update);
            }

            // Start animation
            update();

            console.log("Canvas Demo Reference Page Loaded");
            console.log(
                "This page demonstrates the same drawing operations as the gpui-react canvas demo"
            );
        </script>
    </body>
</html>
